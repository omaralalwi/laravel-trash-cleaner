# Laravel Trash Cleaner

<p align="center">
  <a href="https://github.com/omaralalwi/laravel-trash-cleaner" target="_blank">
    <img src="https://raw.githubusercontent.com/omaralalwi/laravel-trash-cleaner/master/public/images/laravel-trash-cleaner.jpg" alt="laravel trash cleaner">
  </a>
</p>

Efficiently cleans up log and debug files generated by tools like Clockwork and Laravel Debugbar, and optionally clears frontend build assets and Vite cache. The package includes:

- ⏱️ Progress-bar based deletion for debug files.
- 🧼 Customizable frontend asset cleaning (e.g., `.vite`, `public/build`).
- ⚙️ Optional `npm install` & `npm run build` for rebuilding frontend.

![Deploy publish](https://raw.githubusercontent.com/omaralalwi/laravel-trash-cleaner/master/public/images/trash-screen-shot.png)

---

## Installation

Install the package via Composer:

```bash
composer require omaralalwi/laravel-trash-cleaner
````

### Publishing Configuration File

Optionally publish the config file:

```bash
php artisan vendor:publish --provider="Omaralalwi\LaravelTrashCleaner\Providers\LaravelTrashCleanerServiceProvider" --tag=config
```

---

## 🔧 Configuration

The configuration file will be located at `config/laravel-trash-cleaner.php`. Here's what you can configure:

```php
return [
    'schedule' => false,             // Enable scheduled cleanup
    'frequency' => 'daily',          // Schedule frequency

    'cleanup_paths' => [             // Paths to delete (glob allowed)
        'storage/framework/views/*',
        'public/build',
        'node_modules/.vite',
    ],

    'package_manager' => 'npm',      // Can be: npm, yarn, pnpm
    'build_commands' => [            // Build steps (after cleanup)
        'install',
        'run build',
    ],
];
```

---

## 🧹 Usage

### 1. Clean Debug Files

This command clears Clockwork and Debugbar files with a real-time progress bar.

```bash
php artisan trash:clean
```

This helps free up disk space used by:

* `storage/debugbar/`
* `storage/clockwork/`

### 2. Clean Frontend Assets & Vite Cache

This command removes paths like `public/build`, `node_modules/.vite`, and `storage/framework/views`, based on your config. Optionally runs frontend build.

```bash
php artisan trash:clean-assets
```

#### ➕ Run Frontend Build After Cleanup:

```bash
php artisan trash:clean-assets --build
```

This will:

* Run `npm install`
* Run `npm run build` (or any commands you set in config)

---

### 🔁 Automating with Scheduler

To schedule the `trash:clean` command:

1. In `config/laravel-trash-cleaner.php`, set:

```php
'schedule' => true,
'frequency' => 'daily', // or 'weekly', 'hourly', etc.
```

2. Ensure Laravel’s scheduler is active (e.g., via cron):

```bash
* * * * * cd /your-app && php artisan schedule:run >> /dev/null 2>&1
```

---

## 📦 Other Open Source Packages by Omar Alalwi

* [Lexi Translate](https://github.com/omaralalwi/lexi-translate) – Multilingual Eloquent model translations.
* [Gpdf](https://github.com/omaralalwi/Gpdf) – HTML to PDF converter for Laravel (Arabic-friendly).
* [Laravel Taxify](https://github.com/omaralalwi/laravel-taxify) – Simple VAT/tax helpers for Laravel.
* [Laravel Deployer](https://github.com/omaralalwi/laravel-deployer) – Zero-downtime deployments for Laravel/Node.
* [Laravel Time Craft](https://github.com/omaralalwi/laravel-time-craft) – Date/time query helpers for Eloquent.
* [Laravel Startkit](https://github.com/omaralalwi/laravel-startkit) – Scalable Laravel admin dashboard starter kit.

---

## 🤝 Contributing

See [CONTRIBUTING](CONTRIBUTING.md) for guidelines.

## 🔐 Security

If you find any vulnerabilities, please report them to: [omaralwi2010@gmail.com](mailto:omaralwi2010@gmail.com)

## 📝 License

The MIT License (MIT). See [LICENSE](LICENSE.md) for more details.
